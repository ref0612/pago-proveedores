{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\pasaj\\\\Music\\\\pullman-payment-system\\\\frontend\\\\src\\\\hooks\\\\useAuth.tsx\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport { createContext, useContext, useEffect, useState } from 'react';\nimport { apiGet } from '../services/api';\nimport { useAuth } from './AuthContext';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport { useAuth } from './AuthContext';\n\n// Contexto de notificaciones global\n\nconst NotificacionesContext = /*#__PURE__*/createContext(undefined);\nexport function NotificacionesProvider({\n  children\n}) {\n  _s();\n  const {\n    user\n  } = useAuth();\n  const [notificaciones, setNotificaciones] = useState([]);\n  const recargarNotificaciones = async () => {\n    if (!user) return;\n    try {\n      const res = await apiGet(`/notificaciones/${user.rol}`);\n      setNotificaciones(res);\n    } catch (e) {\n      setNotificaciones([]);\n    }\n  };\n  useEffect(() => {\n    recargarNotificaciones();\n    // eslint-disable-next-line\n  }, [user]);\n  return /*#__PURE__*/_jsxDEV(NotificacionesContext.Provider, {\n    value: {\n      notificaciones,\n      setNotificaciones,\n      recargarNotificaciones\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 46,\n    columnNumber: 5\n  }, this);\n}\n_s(NotificacionesProvider, \"sOY5OKDrulrMKJr1BWxDhiaWJXg=\", false, function () {\n  return [useAuth];\n});\n_c = NotificacionesProvider;\nexport function useNotificaciones() {\n  _s2();\n  const ctx = useContext(NotificacionesContext);\n  if (!ctx) throw new Error('useNotificaciones debe usarse dentro de NotificacionesProvider');\n  return ctx;\n}\n_s2(useNotificaciones, \"/dMy7t63NXD4eYACoT93CePwGrg=\");\nvar _c;\n$RefreshReg$(_c, \"NotificacionesProvider\");","map":{"version":3,"names":["createContext","useContext","useEffect","useState","apiGet","useAuth","jsxDEV","_jsxDEV","NotificacionesContext","undefined","NotificacionesProvider","children","_s","user","notificaciones","setNotificaciones","recargarNotificaciones","res","rol","e","Provider","value","fileName","_jsxFileName","lineNumber","columnNumber","_c","useNotificaciones","_s2","ctx","Error","$RefreshReg$"],"sources":["C:/Users/pasaj/Music/pullman-payment-system/frontend/src/hooks/useAuth.tsx"],"sourcesContent":["import { createContext, useContext, useEffect, useState } from 'react';\r\nimport { apiGet } from '../services/api';\r\nimport { useAuth } from './AuthContext';\r\n\r\nexport { useAuth } from './AuthContext';\r\nexport type { User } from './AuthContext';\r\n\r\n// Contexto de notificaciones global\r\nexport interface Notificacion {\r\n  id: number;\r\n  mensaje: string;\r\n  fecha: string;\r\n  leida: boolean;\r\n  tipo: string;\r\n  referenciaId?: number;\r\n}\r\n\r\ninterface NotificacionesContextType {\r\n  notificaciones: Notificacion[];\r\n  setNotificaciones: React.Dispatch<React.SetStateAction<Notificacion[]>>;\r\n  recargarNotificaciones: () => void;\r\n}\r\n\r\nconst NotificacionesContext = createContext<NotificacionesContextType | undefined>(undefined);\r\n\r\nexport function NotificacionesProvider({ children }: { children: React.ReactNode }) {\r\n  const { user } = useAuth();\r\n  const [notificaciones, setNotificaciones] = useState<Notificacion[]>([]);\r\n\r\n  const recargarNotificaciones = async () => {\r\n    if (!user) return;\r\n    try {\r\n      const res = await apiGet(`/notificaciones/${user.rol}`);\r\n      setNotificaciones(res);\r\n    } catch (e) {\r\n      setNotificaciones([]);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    recargarNotificaciones();\r\n    // eslint-disable-next-line\r\n  }, [user]);\r\n\r\n  return (\r\n    <NotificacionesContext.Provider value={{ notificaciones, setNotificaciones, recargarNotificaciones }}>\r\n      {children}\r\n    </NotificacionesContext.Provider>\r\n  );\r\n}\r\n\r\nexport function useNotificaciones() {\r\n  const ctx = useContext(NotificacionesContext);\r\n  if (!ctx) throw new Error('useNotificaciones debe usarse dentro de NotificacionesProvider');\r\n  return ctx;\r\n} "],"mappings":";;;AAAA,SAASA,aAAa,EAAEC,UAAU,EAAEC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AACtE,SAASC,MAAM,QAAQ,iBAAiB;AACxC,SAASC,OAAO,QAAQ,eAAe;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAExC,SAASF,OAAO,QAAQ,eAAe;;AAGvC;;AAgBA,MAAMG,qBAAqB,gBAAGR,aAAa,CAAwCS,SAAS,CAAC;AAE7F,OAAO,SAASC,sBAAsBA,CAAC;EAAEC;AAAwC,CAAC,EAAE;EAAAC,EAAA;EAClF,MAAM;IAAEC;EAAK,CAAC,GAAGR,OAAO,CAAC,CAAC;EAC1B,MAAM,CAACS,cAAc,EAAEC,iBAAiB,CAAC,GAAGZ,QAAQ,CAAiB,EAAE,CAAC;EAExE,MAAMa,sBAAsB,GAAG,MAAAA,CAAA,KAAY;IACzC,IAAI,CAACH,IAAI,EAAE;IACX,IAAI;MACF,MAAMI,GAAG,GAAG,MAAMb,MAAM,CAAC,mBAAmBS,IAAI,CAACK,GAAG,EAAE,CAAC;MACvDH,iBAAiB,CAACE,GAAG,CAAC;IACxB,CAAC,CAAC,OAAOE,CAAC,EAAE;MACVJ,iBAAiB,CAAC,EAAE,CAAC;IACvB;EACF,CAAC;EAEDb,SAAS,CAAC,MAAM;IACdc,sBAAsB,CAAC,CAAC;IACxB;EACF,CAAC,EAAE,CAACH,IAAI,CAAC,CAAC;EAEV,oBACEN,OAAA,CAACC,qBAAqB,CAACY,QAAQ;IAACC,KAAK,EAAE;MAAEP,cAAc;MAAEC,iBAAiB;MAAEC;IAAuB,CAAE;IAAAL,QAAA,EAClGA;EAAQ;IAAAW,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACqB,CAAC;AAErC;AAACb,EAAA,CAxBeF,sBAAsB;EAAA,QACnBL,OAAO;AAAA;AAAAqB,EAAA,GADVhB,sBAAsB;AA0BtC,OAAO,SAASiB,iBAAiBA,CAAA,EAAG;EAAAC,GAAA;EAClC,MAAMC,GAAG,GAAG5B,UAAU,CAACO,qBAAqB,CAAC;EAC7C,IAAI,CAACqB,GAAG,EAAE,MAAM,IAAIC,KAAK,CAAC,gEAAgE,CAAC;EAC3F,OAAOD,GAAG;AACZ;AAACD,GAAA,CAJeD,iBAAiB;AAAA,IAAAD,EAAA;AAAAK,YAAA,CAAAL,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}